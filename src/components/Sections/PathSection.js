import styled from "styled-components";
import {useLayoutEffect, useRef} from "react";
import gsap from "gsap";
import ScrollTrigger from "gsap/ScrollTrigger";


const Section = styled.div`
    min-height: 300vh;
    width: 100vw;
    background-color: white;
    position: relative;
`;

const Title = styled.div`
    font-size: 62px;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center; 
    color: black;
    font-weight: bold;
`;

 const Container = styled.div`
    width: 70vw;
    height: 300vh;
    background-color: white;
    margin: 0 auto;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
`;

const SVGContainer = styled.div`
   display: flex;
   justify-content: center;
   align-items: center;
`;

const VectorContainer = styled.div`
    position: absolute;
    top: 0.5rem;
    left: 50%;
    transform: translate(-50%);
    width: 100%;
    height: 100%;
    overflow: hidden;

    svg{
        width: 100%;
        height: 100%;
    }
`;

const SVGPath = ({progress = 0, ...props}) => (

    <svg
    width={69.333}
    height={1598.667}
    viewBox="0 0 52 1199"
    fill={props.fill || "none"}

    {...props}
  >
    <path strokeWidth="2px" className="svg-path" stroke="black" d="M24 76.6v76.7l-5.8-.7c-7-.8-10.4.3-14.9 4.7-3.4 3.2-4 5.8-2.4 9.9.5 1.4.4 4.3-.2 7.4-.9 4.2-.7 6.6 1.1 14.2 1.1 4.9 2.8 10.6 3.6 12.6 1.3 3.1 2 3.6 4.8 3.6 1.9 0 5.7-.6 8.6-1.4l5.2-1.3v149l-5.8-.7c-7-.8-10.4.3-14.9 4.7-3.4 3.2-4 5.8-2.4 9.9.5 1.4.4 4.3-.2 7.4-.9 4.2-.7 6.6 1.1 14.2 1.1 4.9 2.8 10.6 3.6 12.6 1.3 3.1 2 3.6 4.8 3.6 1.9 0 5.7-.6 8.6-1.4l5.2-1.3v150l-5.8-.7c-7-.8-10.4.3-14.9 4.7-3.4 3.2-4 5.8-2.4 9.9.5 1.4.4 4.3-.2 7.4-.9 4.2-.7 6.6 1.1 14.2 1.1 4.9 2.8 10.6 3.6 12.6 1.3 3.1 2 3.6 4.8 3.6 1.9 0 5.7-.6 8.6-1.4l5.2-1.3v149l-5.8-.7c-7-.8-10.4.3-14.9 4.7-3.4 3.2-4 5.8-2.4 9.9.5 1.4.4 4.3-.2 7.4-.9 4.2-.7 6.6 1.1 14.2 1.1 4.9 2.8 10.6 3.6 12.6 1.3 3.1 2 3.6 4.8 3.6 1.9 0 5.7-.6 8.6-1.4l5.2-1.3v151l-5.8-.7c-7-.8-10.4.3-14.9 4.7-3.4 3.2-4 5.8-2.4 9.9.5 1.4.4 4.3-.2 7.4-.9 4.2-.7 6.6 1.1 14.2 1.1 4.9 2.8 10.6 3.6 12.6 1.3 3.1 2 3.6 4.8 3.6 1.9 0 5.7-.6 8.6-1.4l5.2-1.3v149l-5.8-.7c-7-.8-10.4.3-14.9 4.7-3.4 3.2-4 5.8-2.4 9.9.5 1.4.4 4.3-.2 7.4-.9 4.2-.7 6.6 1.1 14.2 3.2 13.8 4.4 16.2 8.3 16.2 8.4 0 22.7-5.3 28.2-10.4 1.5-1.4 4.5-3 6.7-3.6 4.4-1.2 5.6-2.8 6.6-8.9.6-3.7.2-5.2-3.7-12.5-4.2-8.1-4.3-8.4-3-12.3 2.4-7.2.7-9-8.8-9.2-2.8-.1-5.1.5-6.3 1.6-1.7 1.6-1.8-.8-1.8-72.5V996l3.7-1.9c2.1-1 5-3 6.6-4.5 1.5-1.4 4.5-3 6.7-3.6 4.4-1.2 5.6-2.8 6.6-8.9.6-3.7.2-5.2-3.7-12.5-4.2-8.1-4.3-8.4-3-12.3 2.4-7.2.7-9-8.8-9.2-2.8-.1-5.1.5-6.3 1.6-1.7 1.6-1.8-.8-1.8-73.5V796l3.7-1.9c2.1-1 5-3 6.6-4.5 1.5-1.4 4.5-3 6.7-3.6 4.4-1.2 5.6-2.8 6.6-8.9.6-3.7.2-5.2-3.7-12.5-4.2-8.1-4.3-8.4-3-12.3 2.4-7.2.7-9-8.8-9.2-2.8-.1-5.1.5-6.3 1.6-1.7 1.6-1.8-.8-1.8-72.5V598l3.8-1.9c2-1 4.9-3 6.5-4.5 1.5-1.4 4.5-3 6.7-3.6 4.4-1.2 5.6-2.8 6.6-8.9.6-3.7.2-5.2-3.7-12.5-4.2-8.1-4.3-8.4-3-12.3 2.4-7.2.7-9-8.8-9.2-2.8-.1-5.1.5-6.3 1.6-1.7 1.6-1.8-.8-1.8-73V399l3.7-1.9c2.1-1 5-3 6.6-4.5 1.5-1.4 4.5-3 6.7-3.6 4.4-1.2 5.6-2.8 6.6-8.9.6-3.7.2-5.2-3.7-12.5-4.2-8.1-4.3-8.4-3-12.3 2.4-7.2.7-9-8.8-9.2-2.8-.1-5.1.5-6.3 1.6-1.7 1.6-1.8-.8-1.8-72.5V201l3.8-1.9c2-1 4.9-3 6.5-4.5 1.5-1.4 4.5-3 6.7-3.6 4.4-1.2 5.6-2.8 6.6-8.9.6-3.7.2-5.2-3.7-12.5-4.2-8.1-4.3-8.4-3-12.3 2.4-7.2.7-9-8.8-9.2-2.8-.1-5.1.5-6.3 1.6-1.7 1.6-1.8-.8-1.8-74C28 .7 28 0 26 0s-2 .7-2 76.6zm14.5 80.6c-1.1 5-.8 6.7 1.7 10.1 5.4 7.2 6.9 10.9 6.3 14.8-.6 3.4-1 3.8-5 4.8-2.5.6-4.9 2-5.5 3-2 3.8-23.5 12-25.6 9.8-.4-.3-1.5-3.7-2.5-7.4-2.2-7.7-2.4-15-.7-18.7.8-2 .8-3.5-.1-6.6-1.1-3.8-1.1-4.1 1.6-6.5 2.6-2.2 3.7-2.4 12.4-2.5 8.3 0 9.8-.3 11.4-2 1-1.1 2.9-2 4.3-2 2.3 0 2.4.3 1.7 3.2zm0 198c-1.1 5-.8 6.7 1.7 10.1 5.4 7.2 6.9 10.9 6.3 14.8-.6 3.4-1 3.8-5 4.8-2.5.6-4.9 2-5.5 3-2 3.8-23.5 12-25.6 9.8-.4-.3-1.5-3.7-2.5-7.4-2.2-7.7-2.4-15-.7-18.7.8-2 .8-3.5-.1-6.6-1.1-3.8-1.1-4.1 1.6-6.5 2.6-2.2 3.7-2.4 12.4-2.5 8.3 0 9.8-.3 11.4-2 1-1.1 2.9-2 4.3-2 2.3 0 2.4.3 1.7 3.2zm0 199c-1.1 5-.8 6.7 1.7 10.1 5.4 7.2 6.9 10.9 6.3 14.8-.6 3.4-1 3.8-5 4.8-2.5.6-4.9 2-5.5 3-2 3.8-23.5 12-25.6 9.8-.4-.3-1.5-3.7-2.5-7.4-2.2-7.7-2.4-15-.7-18.7.8-2 .8-3.5-.1-6.6-1.1-3.8-1.1-4.1 1.6-6.5 2.6-2.2 3.7-2.4 12.4-2.5 8.3 0 9.8-.3 11.4-2 1-1.1 2.9-2 4.3-2 2.3 0 2.4.3 1.7 3.2zm0 198c-1.1 5-.8 6.7 1.7 10.1 5.4 7.2 6.9 10.9 6.3 14.8-.6 3.4-1 3.8-5 4.8-2.5.6-4.9 2-5.5 3-2 3.8-23.5 12-25.6 9.8-.4-.3-1.5-3.7-2.5-7.4-2.2-7.7-2.4-15-.7-18.7.8-2 .8-3.5-.1-6.6-1.1-3.8-1.1-4.1 1.6-6.5 2.6-2.2 3.7-2.4 12.4-2.5 8.3 0 9.8-.3 11.4-2 1-1.1 2.9-2 4.3-2 2.3 0 2.4.3 1.7 3.2zm0 200c-1.1 5-.8 6.7 1.7 10.1 5.4 7.2 6.9 10.9 6.3 14.8-.6 3.4-1 3.8-5 4.8-2.5.6-4.9 2-5.5 3-2 3.8-23.5 12-25.6 9.8-.4-.3-1.5-3.7-2.5-7.4-2.2-7.7-2.4-15-.7-18.7.8-2 .8-3.5-.1-6.6-1.1-3.8-1.1-4.1 1.6-6.5 2.6-2.2 3.7-2.4 12.4-2.5 8.3 0 9.8-.3 11.4-2 1-1.1 2.9-2 4.3-2 2.3 0 2.4.3 1.7 3.2zm0 198c-1.1 5-.8 6.7 1.7 10.1 5.4 7.2 6.9 10.9 6.3 14.8-.6 3.4-1 3.8-5 4.8-2.5.6-4.9 2-5.5 3-2 3.8-23.5 12-25.6 9.8-.4-.3-1.5-3.7-2.5-7.4-2.2-7.7-2.4-15-.7-18.7.8-2 .8-3.5-.1-6.6-1.1-3.8-1.1-4.1 1.6-6.5 2.6-2.2 3.7-2.4 12.4-2.5 8.3 0 9.8-.3 11.4-2 1-1.1 2.9-2 4.3-2 2.3 0 2.4.3 1.7 3.2z" />
  </svg>
    
  )

const DrawSVG = () => {

    const ref = useRef(null);

    gsap.registerPlugin(ScrollTrigger);

    useLayoutEffect(() => {
        let element = ref.current;
        let svg = document.getElementsByClassName("svg-path")[0];
        const length = svg.getTotalLength(); 
        svg.style.strokeDasharray = length;
        svg.style.strokeDashoffset = length; 
        let t1 = gsap.timeline({
          scrollTrigger:{
              trigger: element, 
              start: "top center",
              end: "bottom bottom",
              onUpdate: (self) => {
                 const draw = length * self.progress;
                 svg.style.strokeDashoffset = length - draw;
              }
          }  
        })

        return () => {

        }

    }, [])

    return(
        <VectorContainer ref={ref}>
            <SVGPath />
        </VectorContainer>
    )
}

const PathSection = () => {
    return(
        <Section>
            <Title>Tokenomics</Title>
            <Container>
                <SVGContainer>
                    <DrawSVG />
                </SVGContainer>
            </Container>
        </Section>
    )
}


export default PathSection;